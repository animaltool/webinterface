<f:comment>
##########################################################################
#  Copyright notice
#
#  (c) 2015 [d] Ligo design+development - All rights reserved
#  (Details on https://github.com/animaltool)
#
#  This script belongs to the TYPO3 Flow package "DLigo.Animaltool".
#  The DLigo Animaltool project is free software; you can redistribute
#  it and/or modify it under the terms of the GNU Lesser General Public
#  License (GPL) as published by the Free Software Foundation; either
#  version 3 of the License, or  (at your option) any later version.
#
#  The GNU General Public License can be found at
#  http://www.gnu.org/copyleft/gpl.html.
#
#  This script is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  This copyright notice MUST APPEAR in all copies of the script!
##########################################################################
</f:comment>

<f:alias map="{formodel:'{dl:override(value:model,altValue:for)}'}">
{namespace dl=DLigo\Animaltool\ViewHelpers}
<f:form.validationResults for="{for}">
    <f:if condition="{validationResults.flattenedErrors}">
      <div class="error-wrap">
        <div class="error">
            <ul>
                <f:for each="{validationResults.flattenedErrors}" key="propertyName" as="errors">
                <f:alias map="{forproperty:'{dl:override(value:propertyName,altValue:for)}'}">
                    <li>
                        {propertyName -> f:translate(id: '{formodel}.{forproperty}')}  
                        <ul>
                            <f:for each="{errors}" as="propertyError">
                                <li>
                                    {propertyError -> f:translate(id: propertyError.code, arguments: propertyError.arguments, source: 'ValidationErrors')}
                                </li>
                            </f:for>
                        </ul>
                    </li>
                </f:alias>
                </f:for>
            </ul>
        </div>
      </div>
      <div class="clearer"></div>
    </f:if>
</f:form.validationResults>
</f:alias>
